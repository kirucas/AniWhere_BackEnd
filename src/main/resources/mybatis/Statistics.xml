<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mybatis.Statistics">
	
	<select id="registerAnimal" resultType="int">
		SELECT COUNT(*)
		FROM animal
	</select>
	
	<select id="todayRegisterAni" parameterType="java.util.Map" resultType="int">
		SELECT COUNT(*)
		FROM animal
		WHERE TO_CHAR(ani_regidate) = TO_CHAR(#{today})
	</select>
	
	<select id="averageAnimal" resultType="double">
		SELECT ROUND(a.count/m.count, 1)
		FROM (SELECT COUNT(*) count FROM animal) a,
			(SELECT COUNT(*) count FROM member) m
	</select>
	
	<select id="registerStore" resultType="int">
		SELECT COUNT(*)
		FROM store_location
	</select>
	
	<select id="registerLostAnimal" resultType="int">
		SELECT COUNT(*)
		FROM lost_animal
	</select>
	
	<select id="todayRegisterLost" parameterType="java.util.Map" resultType="int">
		SELECT COUNT(*)
		FROM lost_animal
		WHERE TO_CHAR(#{today}) = TO_CHAR(start_notice)
	</select>
	
	<select id="applyMating" resultType="int">
		SELECT COUNT(*)
		FROM mating
	</select>
	
	<select id="matingSuccess" resultType="int">
		SELECT COUNT(*)
		FROM drafting
		WHERE apply=1
	</select>
	
	<select id="categoryAnimalCount" resultType="java.util.Map">
		SELECT ani_species, COUNT(*) count
		FROM animal
		GROUP BY ani_species
		ORDER BY ani_species
	</select>
	
</mapper>